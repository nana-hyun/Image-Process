# 8.4 Surface-based methods

surface-based image registration methods:

* 다른 공간에서 해당하는 이미지 결정
* 이러한 표면들을 가장 잘 정렬하는 변환 계산

skin이나 bone의 extraction은 쉽고 automatic하나, soft tissue boundary surface는 일반적으로 더 어렵고 less automatic하다

Image segmentation : 3D surface를 형성하는데, 

1) 연결된 연속 image slice에서 2D 윤곽선을 생성
2) image volume에서 직접 3D 표면 생성

Bone surface point의 경우,

tracked A mode and tracked B mode ultrasound probes (초음파 변환기)

* computer vision sensors :  3D localizers, tracked A-mode ultrasound probes -> surface point set 생성
* Tracked B-mode probes : segment되어야하는 surface point로부터 2D images set(or a single compounded 3D image) 생성

**nonrigid or rigid** - basic feature 제공

nonrigid surface based registration : "물체 내용의 변형이 표면과 어떻게 관련지을 수 있는가?"

보고된 대부분의 surface-based algorithm : rigid transformation과 관련

때때로 등방성/비등방성 scaling과 관련이 있기도 하다.


## 8.4.1 Disparity functions

surface-based 와 관련된 computer vision 분야에서 다룬 것들

* polyheddral model
* piecewise-superquadric model

other

* rely on the existence of specific simple features 
* make asumtions about the global shape

두 곡면 X와 Y 사이의일부 disparity function 또는 metric을 최소화 하는 transformation을 검색

disparity function : 거리

* feature set A와 B 사이의 거리 = A의 점과 B의 점 사이의 최소 거리

![image](https://user-images.githubusercontent.com/101063108/168487215-fa9975b0-45ac-484e-92fb-934c7f74c434.png)

d(a,b)는 a와 b사이의 유클리드 거리

-> d(A,B)는 두 세트의 점들의 쌍이 가깝다면 작다.

* Hausdorff 거리

A에서 B까지의 Hausdorff거리 : ![image](https://user-images.githubusercontent.com/101063108/168487313-1db5f261-824f-4f29-a29e-eb331aa87d99.png)

두개의 set A, B 사이의 hausdorff거리 : ![image](https://user-images.githubusercontent.com/101063108/168487353-8367f850-ee80-4cea-841e-ad01b1cd6ca3.png)

이는 마찬가지로 모든 A의 점이 B에 있는 점과 가깝고, 반대의 경우(모든 B에 있는 점이 A에 있는 점과 가까움)일 때도 마찬가지로 작다. 

이러한 측정법 중 아무것도 disparity function에 그다지 유용하지 x

일반적으로 사용되는 것 : 한 표면의 점과 다른 표면의 대응 점 사이의 평균거리

![image](https://user-images.githubusercontent.com/101063108/168487485-ee8ac42b-951f-42bd-915b-3e2283ebd311.png) : 표면 X 위의 Nx 점의 집합

disparity function 최소화 : 

![image](https://user-images.githubusercontent.com/101063108/168487571-32e50396-e738-4fa8-bc5e-817ddf7a311d.png)

* yj : 점 xj에 상응하는 표면 Y 위의 점
* C : correspondence function (e.g. closest point operator)
* {wj} : {xj}와 연관되 가중치 set

Eq 8.33과 Eq. 8.21(point -based registration)이 비슷

![image](https://user-images.githubusercontent.com/101063108/168487779-e54f26af-8f97-48b4-9a20-d1570c79e66a.png)

point based와 surface based의 주요 차이점 : 점 대응 정보의 가용성

surface based algorithm - 정확한 점 대응정보가 없기때문에 반복 검색을 기반으로 함

Eq 8.34는 특정 T에 대한 점 대응 정보 제공

